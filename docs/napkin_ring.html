<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Math 3D</title>
    
    <script src="resources/mathbox-bundle.js"></script>
    <link rel="stylesheet" href="resources/mathbox.css">
    
    <script src="math3d.js"></script>
    <link rel="stylesheet" href="math3d.css">
    
    <script src="resources/dat.gui.js"></script>
    <link rel="stylesheet" href="resources/dat-gui-custom.css">
    
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="
    https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.5.3/math.js"></script>

    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
</head>
<body>
<div id="my-math-box"></div>
<script>

var queryString = Utility.getQueryString();
var encodedUserSettings = queryString['settings'];

var unitSphere = function(u,v){
    return [ Math.cos(u)*Math.sin(v), Math.sin(u)*Math.sin(v), Math.cos(v) ]
}
var unitCylinder = function(u,v){
    return [ Math.cos(u), Math.sin(u), v ]
}

// var vel_vector =

var authorSettings = {
    containerId:'my-math-box',
    mathScope: {unitSphere:unitSphere, unitCylinder:unitCylinder, R:2, h:1.25},
    scale: [1,1,1],
    wrappedMathObjects:[
        {
            type: 'ParametricSurface',
            settings: {rawExpression: 'R*unitSphere(u,v)', range:`[[0,2*pi],[acos(h/R),acos(-h/R)]]`,opacity:1}
        },
        {
            type: 'ParametricSurface',
            settings: {rawExpression: '[sqrt(R^2-h^2)*cos(u), sqrt(R^2-h^2)*sin(u), v]', range:`[[0,2*pi],[-h,h]]`}
        },
        {
            type: 'ParametricSurface',
            settings: {rawExpression: 'R*unitSphere(u,v)', range:`[[0,2*pi],[0,pi]]`,opacity:0.25, gridX:0, gridY:0}
        },
        {
            type: 'ParametricSurface',
            settings: {rawExpression: '[sqrt(R^2-h^2)*cos(u), sqrt(R^2-h^2)*sin(u), v]', range:`[[0,2*pi],[-R,R]]`,color:'lightcoral',opacity:0.25}
        },
    ]
};

var settings = encodedUserSettings===undefined ? authorSettings : Math3D.decodeSettingsAsURL64(encodedUserSettings);

var math3d = new Math3D(settings);

var gui = new dat.GUI();

var slider = gui.add(math3d.mathScope, "R")
            .min(1.33)
            .max(3)
            .step(0.01);

</script>

</body>
</html>
